# エンタープライズアプリケーションアーキテクチャパターン

## レイヤ化

### レイヤ化とは
* ソフトウェア設計者が複雑なソフトウェアのシステムを分割するために使用する一般的な技法である

#### レイヤを分割するメリット
* 他のレイヤを知らなくても、１つのレイヤを全体として考えることができる
* 同じ基本サービスの代替実装でレイヤを置き換えることができる
* レイヤ間の依存を最小限にすることができる
* レイヤを構築すれば多くの高水準サービスがそのレイヤを使用することができる

#### レイヤを分割することでのデメリット
* レイヤは一部の物事をカプセル化してしまう。その結果、連鎖的な変更が起こる場合がある。
* パフォーマンスを損ねる可能性がある

### レイヤ化の発展
* レイヤの概念は90年代のクライアント/サーバーシステムの発展とともに明確になった。
* クライアント/サーバーのシステムは2レイヤのシステムだった(クライアントはUIとアプリケーションコード,サーバーはリレーショナルデータベース)
* アプリケーションがリレーショナルデータベースの更新だけを行う場合、クライアント/サーバーシステムは適切に動作した。問題は、ビジネスルール、妥当性、計算などのドメインロジックを伴った時である。
* この問題の解決方法として、ドメインロジックをストアドプロシージャとしてデータベースに格納することがあげられる。しかし、ストアドプロシージャには弱点があり、その構造化のメカニズムには限界があるため、再び厄介なコードの作成につながってしまう。また、ストアドプロシージャは各データベースベンダの固有のものであるため、ベンダの変更について選択肢がなくなってしまう。

###　オブジェクト指向
* クライアントサーバーが人気を博したこと、オブジェクト指向も人気を集めていた。
* オブジェクト指向のコミュニティーは「３レイヤのシステムに移行する」ことでドメインロジックに関する問題を解決した。
* だが、オブジェクト指向は主流にはならなかった。多くのシステムはまだあまりにシンプルなものだった。(少なくとも開発時には.....)
* Javaの登場によってオブジェクト指向が堂々と主流を占めるようになった。

## 3つの主なレイヤ

### プレゼンテーションレイヤ
* サービスの提供、情報の表示
* ユーザーとソフトウェアの相互作用を行う。このロジックは、コマンドラインや、テキストベースのメニューシステムと同じくらいシンプルな場合もあるが、現在はリッチになりつつある

### ドメインレイヤ
* システムそのものであるロジック
* ビジネスロジックとも呼ばれる。

### データソースレイヤ
* データベース、メッセージングシステム、トランザクションモニタ、その他パッケージとの通信
* 他のシステムとの通信を行い、アプリケーションのためのタスクを実行する。
* エンタープライズアプリケーションの多くでは、データソースロジックはデータベースであることがおおい。